<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link type="text/css" rel="stylesheet" href="style.css"> 
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
        
        <script>
            $(document).ready(function() {
                $.ajax({
                    url: "/data",
                    dataType: "json",
                    cache: false,
                    success: function(data) {
                        $("#home div").append("<p>"+ data.about[0] + "</p>");
                        $("#home div").append("<p>"+ data.about[1] + "</p>");
                        //$('#work p:nth-child(2)').text(data.work[0].companyName);

                        work = data.work                 
                        $(work).each(function(index){
                            $("#work div").append("<h5>"+ work[index].companyName + ":("+ work[index].duration +")" +"</h5>")
                            $("#work div").append('<ul id="ul' + index + '" ></ul>')
                            $('#ul' + index).append("<li>Projects: "+ work[index].project +"</li>")
                            $('#ul' + index).append("<li>Tech: "+ work[index].tech +"</li>")                           
                        })


                        education = data.education                 
                        $(education).each(function(index){
                            $("#education div").append("<h5>"+ education[index].institution +  
                                ":("+ education[index].year +")" +"</h5>")
                            $("#education div").append('<ul id="eul' + index + '" ></ul>')
                            $('#eul' + index).append("<li>"+ education[index].qualification +"</li>")
                        })

                        skills = data.skill 

                        for (let i = 0; i < skills.length; i++) {
                            $("#skill div").append("<h5>"+ Object.keys(skills[i]) + "</h5>")
                            $("#skill div").append('<ul id="sul' + i + '" ></ul>')

                            switch(Object.keys(skills[i])[0]){
                                    case "interpersonal":
                                        for (let y = 0; y < skills[i].interpersonal.length; y++) {
                                            $('#sul' + i).append("<li>"+ skills[i].interpersonal[y]  +"</li>")
                                        }
                                        break
                                    case "programming":
                                    for (let y = 0; y < skills[i].programming.length; y++) {
                                        $('#sul' + i).append("<li>"+ skills[i].programming[y]  +"</li>")
                                    }
                                    break
                                    case "framework":
                                    for (let y = 0; y < skills[i].framework.length; y++) {
                                        $('#sul' + i).append("<li>"+ skills[i].framework[y]  +"</li>")
                                    }
                                    break
                            }  
                        }

                        interest = data.interest 
                        $("#interest div").append("<h5>Interest</h5>")
                        $("#interest div").append('<ul id="hobbies" ></ul>')

                        $(interest).each(function(index){                            
                            $('#hobbies').append("<li>"+ interest[index] +"</li>")
                        })

                        
                        
                        
                    }.bind(this),error: function(xhr, status, err) {
                        alert("Failed to connect to server")
                    }
                });
            });

        </script>
    </head>
    <body>
        <div class="nav-bar" >
            <div>
                <a class="btn" href="#interest">Home</a>
                <a  class="btn" href="#work">Work Experience</a>
                <a  class="btn" href="#education">Education</a>
                <a  class="btn" href="#skill">Skills</a>
                <a  class="btn" href="#interest">Interest</a>
                <a  class="btn" href="#contacts">Contacts</a>
            </div>
        </div>

        <div class="forecast" >
            <p>Johannesburg * 26"C 78'</p>
        </div>

        <div id="home">         
            <img src="profile.jpg" alt="profile image"> 
            <div></div>     
        </div>

        <div id="work">
            <p class="p-head">Work Experience</p>
            <div></div>
        </div>

        <div id="education">
            <p class="p-head">Education</p>
            <div></div>
        </div>

        <div id="skill" >
            <p class="p-head">Skills</p>
            <div></div>
        </div>

        <div id="interest">
            <p class="p-head">Interest</p>
            <div></div>
        </div>  
        
        <div id="footer">

        </div>
    </body>
</html>